(()=>{"use strict";class e{constructor({cardData:e,templateSelector:t,handleCardClick:n,popupWithImage:i}){this._photoLink=e.link,this._title=e.name,this._templateSelector=t,this._handleCardClick=n,this._popupWithImage=i}createCard(){return this._element=this._createCardElement(),this._photo=this._element.querySelector(".element__photo"),this._photoCaption=this._element.querySelector(".element__title"),this._deleteIcon=this._element.querySelector(".element__delete-icon"),this._heartIcon=this._element.querySelector(".element__heart"),this._populateCardElement(),this._setEventListeners(),this._element}_createCardElement(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_populateCardElement(){this._element.querySelector(".element__text").textContent=this._title,this._photo.src=this._photoLink,this._photo.alt=this._title}_setEventListeners(){this._deleteIcon.addEventListener("click",(()=>this._handleDeleteCard())),this._heartIcon.addEventListener("click",(()=>this._handlePhotoLike())),this._photo.addEventListener("click",(()=>this._handleCardClick(this._title,this._photoLink)))}_handleDeleteCard(){this._element.remove(),this._element=null}_handlePhotoLike(){this._heartIcon.classList.toggle("element__heart_like")}}class t{constructor(e){this._popup=document.querySelector(e),this._closeButton=this._popup.querySelector(".popup__close-button")}open(){this._popup.classList.add("popup_opened"),this._closeButton.addEventListener("click",this._handleCloseButton)}_handleCloseButton=e=>{e.preventDefault(),this.close()};close(){this._popup.classList.remove("popup_opened")}_handleEscClose=e=>{e.preventDefault(),"Escape"===e.key&&this.close()};setEventListners(){this._popup.addEventListener("click",(e=>{(e.target.classList.contains("popup__close-button")||e.target===this._popup)&&this.close()}))}}class n extends t{constructor(e,t){super(e),this._formElement=this._popup.querySelector(".form"),this._inputList=this._formElement.querySelectorAll(".form__input"),this._submitFunction=t}_getInputValue(){const e={};return this._inputList.forEach((t=>e[t.name]=t.value)),e}setEventListeners(){super.setEventListners(),this._popup.addEventListener("submit",(()=>{let e=this._getInputValue();this._submitFunction(e),this.close()}))}close(){super.close(),this._formElement.reset()}}class i{constructor(e,t){this._formElement=t,this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled","")):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled"))}_showInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_setEventListeners(){this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}const s=document.querySelector("#profile-edit-popup"),o=document.querySelector(".profile__name"),r=document.querySelector(".profile__subheading"),l=s.querySelector("#username-input"),a=s.querySelector("#about-me-input");function c(e){o.textContent=l.value,r.textContent=a.value}const u=new class extends t{constructor(e){super(e),this._photo=this._popup.querySelector(".popup__image"),this._caption=this._popup.querySelector(".popup__caption")}open(e,t){this._photo.src=t,this._photo.alt=e.replace(/\s+/g,"-").toLowerCase(),this._caption.textContent=e,super.open()}}("#photo-popup"),_=new class{constructor({items:e,itemRenderer:t},n){this._items=e,this._itemRenderer=t,this._containerSelector=n,this._container=document.querySelector(n),this._renderer()}_renderer(){console.log(this._items),this._container.innerHtml="",this._items.forEach((e=>{let t=this._itemRenderer(e);console.log(this._container.appendchild),this._container.append(t)}))}addItem(e){".elements"===this._containerSelector?this._container.prepend(e):this._container.append(e)}}({items:[{name:"Lembah Yosemite",link:"../images/yosemite-valley.png"},{name:"Danau Louise",link:"../images/lake-louise.png"},{name:"Pegunungan Gundul",link:"../images/bald-mountains.png"},{name:"Gunung Latemar",link:"../images/latemar.png"},{name:"Taman Nasional Vanoise",link:"../images/vanoise-national-park.png"},{name:"Lago di Braies",link:"../images/lago-di-braies.png"}],itemRenderer:t=>new e({cardData:t,templateSelector:"#card",handleCardClick:(e,t)=>{u.open(e,t)}}).createCard()},".elements"),p=document.querySelector(".profile__edit-button"),h=document.querySelector("#profile_edit_form");p.addEventListener("click",(function(){h.reset(),S.profile_edit_form.resetValidation(),l.value=o.textContent,a.value=r.textContent;const e=new n("#profile-edit-popup",c);e.open(),e.setEventListeners()}));const d=document.querySelector(".profile__add-button"),m=document.querySelector("#add-card-popup").querySelector("#add-photo-form");function E(t){const n=new e({cardData:{name:t.title,link:t.link},templateSelector:"#card",handleCardClick:(e,t)=>{u.open(e,t)}});_.addItem(n.createCard())}d.addEventListener("click",(function(){m.reset(),S["add-photo-form"].resetValidation();const e=new n("#add-card-popup",E);e.open(),e.setEventListeners()}));const S={};var v;v={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__submit",inactiveButtonClass:"form__submit_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},Array.from(document.querySelectorAll(v.formSelector)).forEach((e=>{const t=new i(v,e),n=e.getAttribute("name");S[n]=t,t.enableValidation()})),new e({cardData:item,templateSelector:"#card",handleCardClick:e=>{u.open(e)},popupWithImage:u})})();